import google.generativeai as genai
import config
import asyncio

genai.configure(api_key=config.GEMINI_API_KEY)
model = genai.GenerativeModel('gemini-1.5-flash')

async def generate_disaster():
    prompt = (
        "Згенеруй унікальний сценарій гри “Бункер” українською мовою. "
        "СУВОРО ДОТРИМУЙСЯ шаблону нижче: "
        "не додавай жодних пояснень, списків чи коментарів "
        "не змінюй формулювання речень "
        "просто підстав зміст замість підкреслень "
        "відповідь має бути рівно в цьому форматі "
        "ВАЖЛИВО: Усі учасники гри є повнолітніми. Дозволяється використовувати серйозні, дорослі та психологічно напружені теми, але без порнографії, сексуального насильства чи незаконних дій. "
        "\n\nШАБЛОН:\n"
        "Світ зазнав _.\n\n"
        "Внаслідок цього _, і перебування на поверхні стало _.\n"
        "Ви перебуваєте в _бункері.\n\n"
        "Час перебування в бункері _(від 1 до 10 років)\n"
        "Запаси їжі та води розраховані приблизно на _ років. Поповнення запасів _. Джерелом електроенергії є _, запасів якого вистачить на _ років.\n"
        "Умови проживання в бункері включають _. Медичні можливості обмежуються _. Рівень безпеки бункера _.\n"
        "Система управління в бункері _. За порушення правил передбачено _.\n"
        "Вихід назовні наразі _.\n"
        "Ваше завдання - вирішити, хто залишиться в бункері, а хто буде змушений покинути його, аргументуючи це своїми характеристиками."
    )

    try:
        response = await model.generate_content_async(prompt)
        return response.text
    except Exception as e:
        print(f"Gemini Error: {e}")
        return (
            "Світ зазнав глобального збою систем. \n\n"
            "Внаслідок цього зв'язок з реальністю втрачено, і перебування на поверхні стало неможливим. \n"
            "Ви перебуваєте в аварійному бункері."
        )
